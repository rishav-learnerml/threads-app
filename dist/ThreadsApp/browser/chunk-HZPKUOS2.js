import{c as j}from"./chunk-KOVZG5YK.js";import{L as D,La as I,Ma as k,Na as _,Oa as f,Pa as u,Q as c,Qa as g,Ra as o,Sa as r,Ta as s,Ua as w,V as y,Va as N,W as M,Wa as F,Xa as C,Ya as $,ab as S,ba as l,bb as a,cb as x,gb as H,ib as R,pa as m,za as p}from"./chunk-OV4ECLEL.js";var h={apiBaseUrl:"https://threadsbe.onrender.com"};var d=class n{http=c(j);getComments(e=""){let t=`${h.apiBaseUrl}/comments`;return e&&(t+=`?parentId=${e}`),console.log("url",t),this.http.get(t)}incrementLikes(e){let t=`${h.apiBaseUrl}/comments/${e}/like`;return console.log(t),this.http.get(t)}decrementLikes(e){let t=`${h.apiBaseUrl}/comments/${e}/dislike`;return this.http.get(t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})};var v=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=p({type:n,selectors:[["app-comment-form"]],decls:4,vars:0,consts:[[1,"flex","flex-col","items-end","gap-4"],["name","input-box","rows","3","placeholder","write something...",1,"w-full","border","border-slate-300","rounded-md","px-3","py-1.5"],["type","submit",1,"inline-block","rounded","border","border-current","px-4","py-1","text-sm","font-medium","text-slate-100","transition","hover:rotate-2","hover:scale-110","focus:outline-none","focus:ring","active:text-indigo-500"]],template:function(t,i){t&1&&(w(0,"form",0),F(1,"textarea",1),w(2,"button",2),a(3," send "),N()())},encapsulation:2})};var P=(n,e)=>e._id;function U(n,e){n&1&&(o(0,"section",16),s(1,"app-comment-form"),r())}function O(n,e){if(n&1&&s(0,"app-comment",17),n&2){let t=e.$implicit;g("comment",t)}}function V(n,e){if(n&1&&(o(0,"section",16),f(1,O,1,1,"app-comment",17,P),r()),n&2){let t=$();m(),u(t.nestedComments())}}var b=class n{expanded=l(!1);isReplying=l(!1);commentService=c(d);comment=R.required();nestedComments=l([]);nestedCommentsEffect=H(()=>{this.expanded()&&this.commentService.getComments(this.comment()._id).subscribe(e=>{this.nestedComments.set(e)})});toggleExpand(){this.expanded.set(!this.expanded())}toggleLike(){let e=this.comment().liked;this.comment().liked=!e,e?this.comment().likes>0&&(this.comment().likes--,this.commentService.decrementLikes(this.comment()._id).subscribe()):(this.comment().likes++,this.commentService.incrementLikes(this.comment()._id).subscribe())}toggleReply(){this.isReplying.set(!this.isReplying()),this.isReplying()&&this.expanded.set(!0)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=p({type:n,selectors:[["app-comment"]],inputs:{comment:[1,"comment"]},decls:22,vars:10,consts:[[1,"block","rounded-md","border","border-gray-200","p-4","shadow-md","sm:p-6","bg-slate-700","text-white"],[1,"sm:flex","sm:justify-between","sm:gap-4","lg:gap-6"],[1,"mt-4","sm:mt-0"],[1,"text-lg","font-medium","text-pretty","text-gray-100"],[1,"mt-4","line-clamp-2","text-sm","text-pretty","text-gray-100"],[1,"mt-6","flex","justify-end","gap-4","lg:gap-6","cursor-pointer"],[1,"group","relative","inline-block","overflow-hidden","border","border-gray-200","px-6","py-1","focus:ring-3","focus:outline-hidden",3,"click"],[1,"absolute","inset-y-0","left-0","w-[2px]","bg-gray-200","transition-all","group-hover:w-full"],[1,"relative","text-sm","font-medium","text-gray-100","transition-colors","group-hover:text-black"],[1,"flex","items-center","cursor-pointer",3,"click"],[1,"me-2","text-lg"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"size-6"],["d","M7.493 18.5c-.425 0-.82-.236-.975-.632A7.48 7.48 0 0 1 6 15.125c0-1.75.599-3.358 1.602-4.634.151-.192.373-.309.6-.397.473-.183.89-.514 1.212-.924a9.042 9.042 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75A.75.75 0 0 1 15 2a2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H14.23c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23h-.777ZM2.331 10.727a11.969 11.969 0 0 0-.831 4.398 12 12 0 0 0 .52 3.507C2.28 19.482 3.105 20 3.994 20H4.9c.445 0 .72-.498.523-.898a8.963 8.963 0 0 1-.924-3.977c0-1.708.476-3.305 1.302-4.666.245-.403-.028-.959-.5-.959H4.25c-.832 0-1.612.453-1.918 1.227Z"],[1,"cursor-pointer","duration-200",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-6"],["stroke-linecap","round","stroke-linejoin","round","d","m19.5 8.25-7.5 7.5-7.5-7.5"],[1,"nested-comments","duration-200","my-4"],[3,"comment"]],template:function(t,i){t&1&&(o(0,"article",0)(1,"div",1)(2,"div",2)(3,"h3",3),a(4),r(),o(5,"p",4),a(6),r()()(),o(7,"dl",5)(8,"a",6),C("click",function(){return i.toggleReply()}),s(9,"span",7),o(10,"span",8),a(11," Reply "),r()(),o(12,"button",9),C("click",function(){return i.toggleLike()}),o(13,"span",10),a(14),r(),y(),o(15,"svg",11),s(16,"path",12),r()(),M(),o(17,"button",13),C("click",function(){return i.toggleExpand()}),y(),o(18,"svg",14),s(19,"path",15),r()()(),k(20,U,2,0,"section",16),k(21,V,3,0,"section",16),r()),t&2&&(m(4),x(" ",i.comment().user.name," "),m(2),x(" ",i.comment().text," "),m(6),S("text-red-500",i.comment().liked),m(2),x(" ",i.comment().likes," "),m(2),I("fill",i.comment().liked?"#ef4444":"black"),m(),S("rotate-180",i.expanded()),m(3),_(i.isReplying()?20:-1),m(),_(i.expanded()?21:-1))},dependencies:[n,v],encapsulation:2})};var z=(n,e)=>e._id;function A(n,e){if(n&1&&s(0,"app-comment",1),n&2){let t=e.$implicit;g("comment",t)}}var B=class n{commentService=c(d);comments=l([]);ngOnInit(){this.getComments()}getComments(){this.commentService.getComments().subscribe(e=>{this.comments.set(e)})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=p({type:n,selectors:[["app-home"]],decls:3,vars:0,consts:[[1,"max-w-lg","mx-auto","flex","flex-col","gap-4"],[3,"comment"]],template:function(t,i){t&1&&(o(0,"section",0),f(1,A,1,1,"app-comment",1,z),r()),t&2&&(m(),u(i.comments()))},dependencies:[b],encapsulation:2})};export{B as Home};
